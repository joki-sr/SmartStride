# Data module Requirements Specification 1.0

| Date | Author | Description |
| ---- | ------ | ----------- |
| 2025/03/28 | SmartStride | data module |

[toc]

这份**中文版需求分析文档**覆盖了患者和数据库管理员的核心需求，确保系统功能清晰可执行。

---

## **用例图**

![user_case](D:\学习资料\3-2学期课程\DSD\RA\user_case.png)

## **终端用户（患者）**  

使用康复设备的个人被视为终端用户。  

### **开启设备**  

- **目标**：开启康复设备，使其准备好进行数据采集。  
- **概要**：患者打开设备，初始化传感器，为运动数据采集做好准备。  
- **使用频率**：每次康复训练前。  
- **前置条件**：设备已充电并处于正常工作状态。  
- **后置条件**：设备成功开启，传感器初始化完成，可进行连接。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 患者按下电源按钮 | 设备启动并初始化传感器 |

---

### **连接设备至数据管理系统**  

- **目标**：建立康复设备与云端数据管理系统之间的连接。  
- **概要**：患者将设备与系统配对，以实现实时数据传输和远程监控。  
- **使用频率**：每次康复训练前。  
- **前置条件**：设备已开启，系统可用。  
- **后置条件**：连接成功，数据可同步传输。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 患者发起设备配对 | 系统搜索可用设备 |
| 患者选择正确的设备 | 系统建立安全连接 |
| 患者确认连接 | 系统显示连接状态 |

---

### **启动传感器数据采集**  

- **目标**：采集患者下肢在康复训练中的运动数据。  
- **概要**：设备连接后，患者启动数据采集，传感器开始记录运动数据。  
- **使用频率**：每次训练可能多次操作。  
- **前置条件**：设备已开启并成功连接系统。  
- **后置条件**：数据持续记录并传输到系统。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 患者启动数据采集 | 系统开始记录传感器数据 |
| 患者进行康复训练 | 系统采集并处理运动数据 |
| 患者停止数据采集 | 系统保存所采集的数据 |

---

### **查看康复进度**  

- **目标**：允许患者跟踪自身的康复进度。  
- **概要**：患者访问系统界面，查看历史数据和康复进度分析结果。  
- **使用频率**：按需查看。  
- **前置条件**：系统已收集并处理相关数据。  
- **后置条件**：患者获得自身康复情况的反馈信息。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 患者访问康复进度界面 | 系统检索并展示数据分析结果 |

---

## **企业用户（数据库管理员）**  
数据库管理员可通过云平台访问所有设备的数据。  
数据库管理员仅可在设备物理连接时访问嵌入式设备的数据。  

### **设置云端与设备配置**  

请参考部署文档。  

---
### **异常数据剔除与补偿**  

- **目标**：确保采集数据的准确性和连续性，以提高康复训练数据的可靠性。  
- **概要**：  
  - **异常数据剔除**：设定关节角度的合理范围，超出范围的数据（例如膝关节角度为 0° 至 140° 之间）会被标记为无效数据，并从分析中剔除。  
  - **数据补偿**：当 BLE 传输中断或数据丢失时，采用线性插值方法修复数据，填补空缺，保持数据的连续性与完整性。  
- **使用频率**：每次数据上传至服务器或数据分析前自动执行。  
- **前置条件**：设备已成功采集到原始运动数据，并上传至服务器。  
- **后置条件**：异常数据被清除，缺失数据被补偿，数据完整性得到保障。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 服务器接收运动数据 | 解析数据并检测是否存在异常值 |
| 系统检测到异常数据 | 标记无效数据并从分析数据集中剔除 |
| 服务器检测到数据缺失 | 使用线性插值方法进行数据补偿 |
| 数据处理完成 | 生成清理后的数据，存入数据库 |

---

### **数据库增删改查（管理患者数据）** 

- **目标**：管理系统中的康复数据，包括存储、更新、查询和删除数据，以确保数据的完整性和可用性。  
- **概要**：数据库管理员可对患者的康复数据进行增删改查操作，支持数据维护和分析需求。  
- **使用频率**：根据需求定期或不定期执行。  
- **前置条件**：系统已存储患者的康复训练数据，管理员拥有适当的访问权限。  
- **后置条件**：数据库内容更新，确保数据的准确性和一致性。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 数据库管理员请求新增数据 | 系统验证数据格式并插入数据库 |
| 数据库管理员请求修改数据 | 系统更新数据库中的相关记录 |
| 数据库管理员请求查询数据 | 系统返回匹配的数据记录 |
| 数据库管理员请求删除数据 | 系统从数据库中移除指定数据 |  

---

### **交付数据给分析团队**  

- **目标**：将原始康复数据传输至分析团队进行进一步处理。  
- **概要**：系统支持管理员将采集到的数据发送至分析团队，以便进行深度分析。  
- **使用频率**：根据分析需求定期进行。  
- **前置条件**：数据采集已完成。  
- **后置条件**：分析团队成功接收结构化数据。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 管理员选择数据批次 | 系统准备数据用于导出 |
| 管理员确认数据传输 | 系统发送数据至分析团队 |

---

### **存储分析后的数据**  

- **目标**：将分析后的数据安全存储，以备未来查询和对比。  
- **概要**：数据经过分析后，被存储至系统，供医疗人员后续查看。  
- **使用频率**：持续进行。  
- **前置条件**：数据分析已完成。  
- **后置条件**：系统安全保存分析后的数据。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 分析团队提交数据结果 | 系统验证并存储数据 |

---

### **提供分析结果给UI界面进行可视化展示**  

- **目标**：为医疗人员提供直观的患者数据分析结果。  
- **概要**：系统将处理后的数据以可视化方式展示，帮助医疗人员进行分析和决策。  
- **使用频率**：按需查看。  
- **前置条件**：已完成数据处理。  
- **后置条件**：系统界面显示分析结果。  

#### **流程**  

| 角色  | 系统 |
|--------|--------|
| 管理员请求数据可视化 | 系统检索并展示处理后的数据 |

---

