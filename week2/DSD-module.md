# 项目用例图

### 模块一：数据采集与传输（week2已完成）

**任务描述：**

1. **传感器数据采集**：实现与角度传感器的通信，确保能够按照100Hz的频率实时采集下肢关节角度的动态变化数据。
2. **蓝牙数据传输**：实现蓝牙低功耗（BLE）通信，确保传感器与移动设备之间的稳定连接和数据传输。
3. **数据接收与初步校验**：在移动设备上实现数据接收功能，并对接收到的数据进行初步校验，确保数据的完整性和准确性。

**开发重点：**

- 蓝牙通信协议的实现与优化。
- 数据接收与校验的逻辑处理。
- 确保数据采集的实时性和稳定性。

---

根据模块一（数据采集与传输）已完成的情况，剩下的功能可以重新划分为 **4 个任务量相近的模块**，分配给四个开发组。

### **模块一：实时数据处理与状态分析**

**任务描述：**  
1. **数据去噪与计算**  
   - 实现卡尔曼滤波算法，对原始传感器数据进行去噪处理。  
   - 计算关节角度、运动速度、加速度等关键参数。  
2. **即时恢复效果判定**  
   - 将计算后的参数与预设康复标准对比，实时判定患者动作是否达标。  
   - 生成即时反馈（如“动作合格”或“需调整幅度”）。  
3. **数据缓存与传递**  
   - 将处理后的数据暂存于内存中，为后续存储和界面展示提供实时数据流。  

**开发重点：**  
- 算法性能优化（确保100Hz实时处理）。  
- 判定逻辑与康复标准的动态适配。  

---

### **模块二：历史数据管理与趋势预测**  
**任务描述：**  

1. **数据持久化**  
   - 设计本地数据库（SQLite），存储历史康复数据（角度、速度、判定结果等）。  
   - 集成云存储（如阿里云OSS），实现数据备份与跨设备同步。  
2. **趋势预测模型**  
   - 实现时间序列分析（如ARIMA）或机器学习模型（如线性回归），预测患者康复进展。  
   - 根据历史数据生成未来3天/1周的关节活动范围预测。  
3. **数据索引与查询**  
   - 支持按时间、康复阶段等条件快速检索历史数据。  

**开发重点：**  
- 数据库设计（平衡效率与扩展性）。  
- 模型训练与预测结果的验证逻辑。  

---

### **模块三：个性化康复训练推荐**  
**任务描述：**  
1. **推荐算法开发**  
   - 结合患者历史数据、当前状态（如关节活动范围）、个体差异（年龄、康复阶段），设计推荐逻辑。  
   - 示例：若膝关节活动增长缓慢，推荐加强屈伸训练的方案。  
2. **康复方案库集成**  
   - 搭建训练方案库，包含图文/视频指导、训练强度、频率等信息。  
   - 实现方案与患者数据的动态匹配（如优先级排序）。  
3. **推荐结果反馈**  
   - 将推荐方案推送到界面模块，并支持患者执行后的效果追踪。  

**开发重点：**  
- 推荐逻辑的合理性验证（需医疗专业知识支持）。  
- 方案库内容的结构化存储与管理。  

---

### **模块四：用户界面与交互系统**  
**任务描述：**  
1. **3D模型与实时数据展示**  
   - 集成3D关节模型（如Unity/OpenGL），实时同步患者动作角度与运动轨迹。  
   - 动态更新图表（如过去一周角度变化曲线）。  
2. **数据对比功能**  
   - 实现患者数据与正常人群标准的可视化对比（柱状图、差值提示）。  
3. **恢复周期预测界面**  
   - 展示预测进度条（如“完成40%，预计剩余8周”），支持点击查看详细依据。  
4. **交互优化**  
   - 设计用户友好的操作流程（如训练推荐的一键执行）。  
   - 适配不同屏幕尺寸（手机/平板）。  

**开发重点：**  
- 3D模型的性能优化与实时渲染。  
- 数据可视化的清晰性与交互性。  

---

### **模块分工与协作关系**  
| 模块名称               | 输入依赖               | 输出结果               | 协作要点                               |
| ---------------------- | ---------------------- | ---------------------- | -------------------------------------- |
| 实时数据处理与状态分析 | 模块一的原始传感器数据 | 处理后的数据、即时反馈 | 需与模块四同步实时数据                 |
| 历史数据管理与趋势预测 | 模块一处理后的数据     | 数据库、预测结果       | 为模块三提供历史数据，为模块四提供预测 |
| 个性化康复训练推荐     | 模块二的历史数据与预测 | 推荐方案               | 依赖模块二的数据，输出到模块四         |
| 用户界面与交互系统     | 所有模块的数据         | 可视化界面、用户操作   | 整合各模块数据，提供统一交互入口       |

---

### **优势与平衡性说明**  
1. **任务量均衡**  
   - 模块一（数据处理）和模块四（界面）侧重实时性与性能优化，适合有算法或图形经验的团队。  
   - 模块二（数据管理）和模块三（推荐系统）侧重逻辑设计与外部集成，适合后端与数据分析团队。  
2. **独立性**  
   - 各模块通过数据接口解耦，可并行开发（如模块四可先用模拟数据开发界面）。  
3. **扩展性**  
   - 模块二的云存储和模块三的方案库均支持后续功能扩展（如远程医疗协作）。  

建议根据团队技术专长分配模块，并预留20%缓冲时间用于模块间的接口联调与测试。